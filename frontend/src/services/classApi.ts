const API_BASE_URL = 'http://localhost:5000/api';interface ApiResponse<T> {  success: boolean;  message?: string;  data?: T;  errors?: any[];}interface ClassData {  name: string;  description?: string;  teacherName?: string;  institution?: string;  studentEmails?: string[];  studentIds?: string[];}import { storage } from './api';class ClassApiService {  private getAuthHeaders(): HeadersInit {    const token = storage.getItem('token');    return {      'Content-Type': 'application/json',      'Authorization': `Bearer ${token}`,    };  }  async getClasses(search?: string, page: number = 1, limit: number = 12): Promise<ApiResponse<any>> {    try {      const token = storage.getItem('token');      if (!token) {        throw new Error('No token found');      }      const params = new URLSearchParams();      if (search) {        params.append('search', search);      }      params.append('page', page.toString());      params.append('limit', limit.toString());      const url = `${API_BASE_URL}/classes?${params.toString()}`;      const response = await fetch(url, {        headers: {          'Authorization': `Bearer ${token}`,        },      });      const result = await response.json();      if (!response.ok) {        throw new Error(result.message || 'Failed to fetch classes');      }      return result;    } catch (error: any) {      console.error('Get classes error:', error);      return {        success: false,        message: error.message || 'Failed to fetch classes',      };    }  }  async getClassById(id: string): Promise<ApiResponse<any>> {    try {      const token = storage.getItem('token');      if (!token) {        throw new Error('No token found');      }      const response = await fetch(`${API_BASE_URL}/classes/${id}`, {        headers: {          'Authorization': `Bearer ${token}`,        },      });      const result = await response.json();      if (!response.ok) {        throw new Error(result.message || 'Failed to fetch class');      }      return result;    } catch (error: any) {      console.error('Get class error:', error);      return {        success: false,        message: error.message || 'Failed to fetch class',      };    }  }  async createClass(data: ClassData): Promise<ApiResponse<any>> {    try {      const token = storage.getItem('token');      if (!token) {        throw new Error('No token found');      }      const response = await fetch(`${API_BASE_URL}/classes`, {        method: 'POST',        headers: {          'Content-Type': 'application/json',          'Authorization': `Bearer ${token}`,        },        body: JSON.stringify(data),      });      const result = await response.json();      if (!response.ok) {        throw new Error(result.message || 'Failed to create class');      }      return result;    } catch (error: any) {      console.error('Create class error:', error);      return {        success: false,        message: error.message || 'Failed to create class',      };    }  }  async updateClass(id: string, data: Partial<ClassData>): Promise<ApiResponse<any>> {    try {      const token = storage.getItem('token');      if (!token) {        throw new Error('No token found');      }      const response = await fetch(`${API_BASE_URL}/classes/${id}`, {        method: 'PUT',        headers: {          'Content-Type': 'application/json',          'Authorization': `Bearer ${token}`,        },        body: JSON.stringify(data),      });      const result = await response.json();      if (!response.ok) {        throw new Error(result.message || 'Failed to update class');      }      return result;    } catch (error: any) {      console.error('Update class error:', error);      return {        success: false,        message: error.message || 'Failed to update class',      };    }  }  async deleteClass(id: string): Promise<ApiResponse<any>> {    try {      const token = storage.getItem('token');      if (!token) {        throw new Error('No token found');      }      const response = await fetch(`${API_BASE_URL}/classes/${id}`, {        method: 'DELETE',        headers: {          'Authorization': `Bearer ${token}`,        },      });      const result = await response.json();      if (!response.ok) {        throw new Error(result.message || 'Failed to delete class');      }      return result;    } catch (error: any) {      console.error('Delete class error:', error);      return {        success: false,        message: error.message || 'Failed to delete class',      };    }  }  async addStudentsToClass(id: string, studentEmails?: string[], studentIds?: string[]): Promise<ApiResponse<any>> {    try {      const token = storage.getItem('token');      if (!token) {        throw new Error('No token found');      }      const response = await fetch(`${API_BASE_URL}/classes/${id}/students`, {        method: 'POST',        headers: {          'Content-Type': 'application/json',          'Authorization': `Bearer ${token}`,        },        body: JSON.stringify({ studentEmails, studentIds }),      });      const result = await response.json();      if (!response.ok) {        throw new Error(result.message || 'Failed to add students');      }      return result;    } catch (error: any) {      console.error('Add students error:', error);      return {        success: false,        message: error.message || 'Failed to add students',      };    }  }  async removeStudentFromClass(classId: string, studentId: string): Promise<ApiResponse<any>> {    try {      const token = storage.getItem('token');      if (!token) {        throw new Error('No token found');      }      const response = await fetch(`${API_BASE_URL}/classes/${classId}/students/${studentId}`, {        method: 'DELETE',        headers: {          'Authorization': `Bearer ${token}`,        },      });      const result = await response.json();      if (!response.ok) {        throw new Error(result.message || 'Failed to remove student');      }      return result;    } catch (error: any) {      console.error('Remove student error:', error);      return {        success: false,        message: error.message || 'Failed to remove student',      };    }  }  async removeStudentsFromClass(classId: string, studentEmails?: string[], studentIds?: string[]): Promise<ApiResponse<any>> {    try {      const token = storage.getItem('token');      if (!token) {        throw new Error('No token found');      }      const response = await fetch(`${API_BASE_URL}/classes/${classId}/students`, {        method: 'DELETE',        headers: {          'Content-Type': 'application/json',          'Authorization': `Bearer ${token}`,        },        body: JSON.stringify({ studentEmails, studentIds }),      });      const result = await response.json();      if (!response.ok) {        throw new Error(result.message || 'Failed to remove students');      }      return result;    } catch (error: any) {      console.error('Remove students error:', error);      return {        success: false,        message: error.message || 'Failed to remove students',      };    }  }  async getClassAnalysis(id: string): Promise<ApiResponse<any>> {    try {      const token = storage.getItem('token');      if (!token) {        throw new Error('No token found');      }      const response = await fetch(`${API_BASE_URL}/classes/${id}/analysis`, {        headers: {          'Authorization': `Bearer ${token}`,        },      });      const result = await response.json();      if (!response.ok) {        throw new Error(result.message || 'Failed to fetch class analysis');      }      return result;    } catch (error: any) {      console.error('Get class analysis error:', error);      return {        success: false,        message: error.message || 'Failed to fetch class analysis',      };    }  }  async getStudentDetails(classId: string, studentId: string): Promise<ApiResponse<any>> {    try {      const token = storage.getItem('token');      if (!token) {        throw new Error('No token found');      }      const response = await fetch(`${API_BASE_URL}/classes/${classId}/students/${studentId}`, {        headers: {          'Authorization': `Bearer ${token}`,        },      });      const result = await response.json();      if (!response.ok) {        throw new Error(result.message || 'Failed to fetch student details');      }      return result;    } catch (error: any) {      console.error('Get student details error:', error);      return {        success: false,        message: error.message || 'Failed to fetch student details',      };    }  }}export const classApi = new ClassApiService();export type { ClassData, ApiResponse };