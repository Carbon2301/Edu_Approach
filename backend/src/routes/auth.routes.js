import express from 'express';import passport from 'passport';import { body } from 'express-validator';import {  register,  login,  getMe,  googleCallback,  logout,  completeGoogleRegistration,} from '../controllers/auth.controller.js';import { protect } from '../middleware/auth.middleware.js';import { uploadProfileImage } from '../middleware/upload.middleware.js';const router = express.Router();const registerValidation = [  body('email').isEmail().withMessage('Please provide a valid email'),  body('password')    .isLength({ min: 6 })    .withMessage('Password must be at least 6 characters'),  body('name').notEmpty().withMessage('Name is required'),  body('role').isIn(['student', 'teacher']).withMessage('Invalid role'),];const loginValidation = [  body('email').isEmail().withMessage('Please provide a valid email'),  body('password').notEmpty().withMessage('Password is required'),];router.post('/register', uploadProfileImage, registerValidation, register);router.post('/login', loginValidation, login);router.get('/me', protect, getMe);router.post('/logout', protect, logout);router.get('/google', passport.authenticate('google', { scope: ['profile', 'email'] }));router.get('/google/callback', passport.authenticate('google', { session: true }), googleCallback);const completeGoogleValidation = [  body('role').isIn(['student', 'teacher']).withMessage('Invalid role. Must be student or teacher'),  body('name').notEmpty().withMessage('Name is required'),  body('gender').isIn(['male', 'female', 'other']).withMessage('Invalid gender'),  body('studentId').optional().trim(),  body('selfIntro').optional().trim().isLength({ max: 500 }).withMessage('Self introduction cannot exceed 500 characters'),];router.post('/google/complete', completeGoogleValidation, completeGoogleRegistration);export default router;