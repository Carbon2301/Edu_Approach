import QuizResult from '../models/QuizResult.model.js';import aiService from '../services/ai.service.gemini.js';import User from '../models/User.model.js';export const generateSingleQuizRecommendations = async (req, res) => {  try {    const { resultId } = req.params;    const userId = req.user.id;    const result = await QuizResult.findOne({      _id: resultId,      userId: userId,    }).populate('quizId');    if (!result) {      return res.status(404).json({        success: false,        message: 'Quiz result not found',      });    }    const user = await User.findById(userId);    const quizType = result.quizId.type;    const mode = quizType === 'ocean' ? 'ocean_only' : 'logical_only';    const jaRecommendations = await aiService.generateRecommendations({      name: user.name,      oceanResult: quizType === 'ocean' ? result : null,      logicalResult: quizType === 'logical' ? result : null,      language: 'ja',      mode: mode,    });    const viRecommendations = await aiService.generateRecommendations({      name: user.name,      oceanResult: quizType === 'ocean' ? result : null,      logicalResult: quizType === 'logical' ? result : null,      language: 'vi',      mode: mode,    });    if (!jaRecommendations.success) {      console.error('   - JA Error:', jaRecommendations.error);    }    if (!viRecommendations.success) {      console.error('   - VI Error:', viRecommendations.error);    }    res.json({      success: true,      data: {        recommendations: {          ja: jaRecommendations.recommendations,          vi: viRecommendations.recommendations,        },        quizType: quizType,      },    });  } catch (error) {    console.error('Generate single recommendations error:', error);    res.status(500).json({      success: false,      message: 'Failed to generate recommendations',      error: error.message,    });  }};